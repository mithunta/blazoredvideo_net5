@page "/"



<BlazoredVideo Pla="OnPlay" Pause="OnPause" TimeUpate="OnTimeUpdate" 
        VideoStateOptions="options"
        class="w-100"
        style="max-width:800px;"
        controls="controls">
    <source src="https://res.cloudinary.com/blazoredgitter/video/upload/v1557015491/samples/elephants.mp4" type="video/mp4" />
</BlazoredVideo>

<div>
    Current Time: @time
</div>


@code{
    private string url;
    private double time;
    public Dictionary<VideoEvents, VideoStateOptions> options = new Dictionary<VideoEvents, VideoStateOptions>();


    protected override void OnInitialized()
    {
        
        options[VideoEvents.TimeUpdate] = new VideoStateOptions { CurrentTime = true, CurrentSrc = true, Played=true, Paused=true };
        options[VideoEvents.Play] = new VideoStateOptions { CurrentTime = true,CurrentSrc = true, Played=true, Paused=true };
        options[VideoEvents.Pause] = new VideoStateOptions { CurrentTime = true,CurrentSrc = true, Played=true, Paused=true };

        
        
    }

    void OnPlay(VideoState state)
    {
        var url = state.CurrentSrc;
        // do something with this
    }
    void OnPause(VideoState state)
    {
        try 
        {
            time = state.CurrentTime;
        }
        catch(Exception e)
        {
            
        }
        
    }
    void OnTimeUpdate(VideoState state)
    {
        var url = state.CurrentSrc;
        var currentTime = state.CurrentTime;
        // do something with this
    }

    
}


